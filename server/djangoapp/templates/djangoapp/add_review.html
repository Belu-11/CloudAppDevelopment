{% extends '../base.html' %}
{% block content %}

    <!--Add review form here -->
    <h2>Add review about {{dealer.full_name}}</h2>
    <form method="post" action="{% url 'djangoapp:add_review' dealer_id %}">
        {% csrf_token %}
        <p>Enter review content:</p>
        <textarea class="form-control" id="content" name="content" rows="2" required></textarea>
        
        <input class="form-check-input" type="checkbox" name="purchasecheck" id="purchasecheck">
        <label for="purchasecheck">Has purchased the car from {{dealer.full_name}}?</label>
        
        {% comment %} <label for="purchasedate" id="dateLabel" style="display: none;">Select your purchase date:</label> {% endcomment %}
        {% comment %} <input class="date-own form-control" type="date" name="purchasedate" id="purchasedate" style="width:25%; display: none;"> {% endcomment %}
        <label for="purchasedate" id="dateLabel">Select your purchase date:</label>
        <span><input class="date-own form-control" type="date" name="purchasedate" id="purchasedate" style="width:25%;"></span>

        <p>Select your car (model-make-year):</p>
        <select name="car" id="car" style="" class="form-select" data-filter-control="true" required>
            {% for car in cars %}
                <option selected data-filter-control="select" value={{car.id}}>{{car.name}}-{{car.car_make.name}}-{{ car.year|date:"Y" }}</option>
            {% endfor %}
        </select>
        {% comment %} <input type="hidden" name="selected_car_id" id="selected_car_id" value=""> {% endcomment %}
        {% comment %} <div class="form-group">
            <label for="content">{{ form.review.label }}</label>
            {{ form.review }}
        </div>
        <div class="form-group">
            <label for="purchase">{{ form.purchase.label }}</label>
            {{ form.purchase }}
        </div>
        <div class="form-group">
            <label for="car">{{ form.car.label }}</label>
            {{ form.car }}
        </div>
        <div class="form-group">
            <label for="purchasedate">{{ form.purchase_date.label }}</label>
            {{ form.purchase_date }}
        </div> {% endcomment %}

        <button type="submit" class="btn btn-primary">Submit review</button>
    </form>


{% comment %} <script type="text/javascript">
    $(document).ready(function() {
        $("#purchasedate").datepicker({
            dateFormat: "dd-mm-yy"
        });
    });
</script> {% endcomment %}

<script type="text/javascript">
    $('.date-own').datepicker({
       format: 'mm/dd/yyyy'
     });
</script>

<script>
    $(document).ready(function() {
        $('#car').bootstrapTable();
    });
</script>

<!-- JavaScript code to toggle visibility based on checkbox status -->
{% comment %} <script>
    document.addEventListener("DOMContentLoaded", function() {
        var checkbox = document.getElementById("purchasecheck");
        var dateLabel = document.getElementById("dateLabel");
        var purchaseDateInput = document.getElementById("purchasedate");

        checkbox.addEventListener("change", function() {
            if (checkbox.checked) {
                dateLabel.style.display = "block";
                purchaseDateInput.style.display = "block";
            } else {
                dateLabel.style.display = "none";
                purchaseDateInput.style.display = "none";
            }
        });
    });
</script> {% endcomment %}
{% endblock %}